create table public.products (
  id uuid not null default gen_random_uuid (),
  product_name text not null,
  description text null,
  image_url text null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  image_urls text[] null,
  user_id uuid null,
  rating_avg numeric null,
  rating_count integer null default 0,
  municipality text null,
  barangay text null,
  latitude numeric(10, 8) null,
  longitude numeric(11, 8) null,
  address text null,
  constraint products_pkey primary key (id),
  constraint products_user_id_fkey foreign KEY (user_id) references auth.users (id) on delete set null
) TABLESPACE pg_default;

create trigger set_products_updated_at BEFORE
update on products for EACH row
execute FUNCTION set_updated_at ();